---
title: "HW4"
author: "ssheng6"
date: "10/05/2021"
output: html_document
---

```{r}

#What time of day should you fly if you want to avoid delays as much as possible? Does this choice depend on anything? #Season? Weather? Airport? Airline? Find three patterns (“null results” are ok!).
#Write your results into Rmarkdown.
#Include a short introduction that summarizes the three results. Then, have a section for each finding.
#Support each finding with data summaries and visualizations. Include your code when necessary.


require(dplyr)
library(lubridate) 
library(ggplot2)
library(tidyverse)
library(nycflights13)
flights
flights %>% colnames()
not_cancelled <- flights %>% 
  filter(!is.na(dep_delay), !is.na(arr_delay))

airline <- not_cancelled %>% 
              filter(arr_delay>0) %>%
              group_by(carrier) %>% 
              arrange(desc(arr_delay))%>%
              summarise(delay = mean(arr_delay, na.rm=TRUE), n = n())
airline

 # ggplot(airline, aes(x = carrier , y=delay)) + geom_histogram()

flights1<-flights %>%
  filter(arr_delay>0)
ggplot(airline, mapping = aes(carrier, y= delay))




ggplot(flights1, aes(x = arr_delay, fill = carrier, colour = carrier)) + 
  geom_histogram(alpha = 0.5)

ggplot(flights1, aes(y = arr_delay,x = carrier, fill = carrier, colour = carrier)) + geom_boxplot()+ggtitle("Average Delay by Airline")

```

#ggplot(data =flight_nc,aes(x=proportion ,y=delay)) + geom_point()
ggplot(data =flight_nc, mapping = aes(x = proportion, y = delay)) + geom_point(alpha = 1/3) +geom_smooth(se = FALSE)+ggtitle("proportion of cancelled vs average delay")+theme(plot.title = element_text(hjust = 0.5))

ggplot
```

